{"version":3,"sources":["app.js"],"names":["makeSwiper","swiperObj","direction","touchMoveStopPropagation","paginationClickable","pagination","iOSEdgeSwipeDetection","flip","slideShadows","onTransitionEnd","swiper","event","console","log","httpAnswer","Swiper","app","angular","module","config","$stateProvider","$urlRouterProvider","when","state","url","templateUrl","controller","allFactory","userId","teleNum","password","HASHPASSWD","tagIP","postRegister","postLogin","ipAddress","setAnwserAddress","isLogin","isRemember","filter","$sce","text","trustAsHtml","directive","link","scope","element","attr","$last","rootSwiper","sumWeight","tagArr","tagArrResult","secQue","options","questionAnswerType","length","splitWeight","origionArr","i","sum","item","finalSplitedArr","itemTwo","slice","takePagesNum","$pagin","$","append","$scope","$rootScope","$http","addClass","height","window","setModOneQue","aa","testDou","questionId","questionContent","questionType","anwserContent","anwserId","testSin","post","paperModule","success","resp","msg","modOne","_","flatten","body","questions","$cookies","$cookieStore","$state","md5","alertLogin","swal","title","allowOutsideClick","showCloseButton","animation","input","inputPlaceholder","html","inputValidator","value","Promise","resolve","reject","$teleNum","val","test","showCancelButton","confirmButtonText","cancelButtonText","then","result","createHash","roleName","getPage","resetDefaults","type","showConfirmButton","timer","dismiss","put","expires","Date","getTime","errorText","alertRegister","noop","setDefaults","progressSteps","yourPassWord","steps","queue","thisModule","userAnswer","fillBlank","uuid","thisQues","UUID","answerId","judgeHaveAnswered","each","b","push","chooseSin","option","chooseDou","judgeOption","ans","k","splice","setModTwoQue","setModTwo","modTwo","error","data","header","status","answer","cookUser","get","restrict","replace","template","prev","slidePrev","next","slideNext","pageUrl","go"],"mappings":"AAiFA,QAASA,cACR,GAAIC,IACHC,UAAW,aACXC,0BAA0B,EAC1BC,qBAAqB,EACrBC,WAAY,qBACZC,uBAAuB,EACvBC,MACCC,cAAc,GAEfC,gBAAiB,SAAUC,EAAQC,GAClCC,QAAQC,IAAI,SACZC,cAGF,OAAO,IAAIC,QAAO,oBAAqBd,GA/FxC,GAAIe,KAAMC,QAAQC,OAAO,SAAU,UAAW,YAAa,cAAe,aAAc,aAExFF,KAAIG,OAAO,SAAUC,EAAgBC,GACpCA,EAAmBC,KAAK,GAAI,mBAC5BF,EACEG,MAAM,YACNC,IAAK,YACLC,YAAa,uBACbC,WAAY,iBAEZH,MAAM,kBACNC,IAAK,kBACLC,YAAa,6BACbC,WAAY,uBAEZH,MAAM,kBACNC,IAAK,kBACLC,YAAa,6BACbC,WAAY,uBAEZH,MAAM,iBACNC,IAAK,iBACLC,YAAa,4BACbC,WAAY,sBAEZH,MAAM,cACNC,IAAK,cACLC,YAAa,yBACbC,WAAY,mBAEZH,MAAM,UACNC,IAAK,UACLC,YAAa,qBACbC,WAAY,eAEZH,MAAM,SACNC,IAAK,SACLC,YAAa,oBACbC,WAAY,eAIf,IAAIC,aACHC,OAAU,GACVC,QAAW,GACXC,SAAY,GACZC,WAAc,GACdC,MAAS,qBAETC,aAAgB,kDAChBC,UAAa,+CACbC,UAAa,qDACbC,iBAAoB,uDACpBC,SAAW,EACXC,YAAc,GAIXxB,UAGJE,KAAIuB,OAAO,cAAe,OAAQ,SAAUC,GAC3C,MAAO,UAAUC,GAChB,MAAOD,GAAKE,YAAYD,OAK1BzB,IAAI2B,UAAU,eAAgB,WAC7B,OACCC,KAAM,SAAUC,EAAOC,EAASC,GACZ,GAAfF,EAAMG,QACTH,EAAMI,WAAajD,aACnBY,QAAQC,IAAI,+BA0BhB,IAAIqC,WAAY,SAAUC,GACzB,GAAIC,KACJ,KAAK,GAAIC,KAAUF,IACdA,EAAOE,GAAQC,SAAiD,KAArCH,EAAOE,GAAQE,oBAAkE,KAArCJ,EAAOE,GAAQE,oBAAkE,KAArCJ,EAAOE,GAAQE,oBAAkE,KAArCJ,EAAOE,GAAQE,oBAAkE,KAArCJ,EAAOE,GAAQE,oBAAkE,KAArCJ,EAAOE,GAAQE,mBAE1N,KAArCJ,EAAOE,GAAQE,oBAAkE,KAArCJ,EAAOE,GAAQE,mBACrEH,EAAaC,GAAU,EAEvBD,EAAaC,GAAU,EAJvBD,EAAaC,GAAUF,EAAOE,GAAQC,QAAQE,OAAS,CAQzD,OADA5C,SAAQC,IAAIuC,GACLK,YAAYL,EAAcD,IAI9BM,YAAc,SAAUN,EAAQO,GACnC,GAAIC,GAAI,EACPC,EAAM,EACNR,IACD,KAAK,GAAIS,KAAQV,GACZA,EAAOU,GAAQD,GAAO,GACzBA,GAAOT,EAAOU,IAEdD,EAAM,EACNR,EAAaO,GAAKE,EAClBF,GAAK,EAGP/C,SAAQC,IAAIuC,EAEZ,IAAIU,KACJ,KAAK,GAAIC,KAAWX,GACJ,GAAXW,EACHD,EAAgBC,GAAWL,EAAWM,MAAM,EAAGZ,EAAaW,IAE5DD,EAAgBC,GAAWL,EAAWM,MAAMZ,EAAaW,EAAU,GAAIX,EAAaW,IAErFD,EAAgBV,EAAaI,QAAUE,EAAWM,MAAMZ,EAAaA,EAAaI,OAAS,GAAIJ,EAAaA,EAAaI,QAE1H,OAAOM,IAIJG,aAAe,SAAUd,GAC5B,GAAIe,GAASC,EAAE,qBACf,KAAK,GAAIR,KAAKR,GACbe,EAAOE,OAAO,kDAKhBpD,KAAIU,WAAW,eAAgB,SAAU2C,EAAQC,EAAYC,GAG5D3D,QAAQC,IAAI,oBACZsD,EAAE,oBAAoBK,SAAS,UAC/BF,EAAW5D,OAASV,aACpBmE,EAAE,iBAAiBM,OAAON,EAAEO,QAAQD,SAAW,IAE/CJ,EAAOM,aAAe,SAAUxB,GAC/BvC,QAAQC,IAAIsC,IAMbkB,EAAOO,GAAK,4EAEZP,EAAOQ,UACNtB,mBAAsB,EACtBuB,WAAc,OACdC,gBAAmB,QACnBC,aAAgB,EAChB1B,UACC2B,cAAiB,KACjBC,SAAY,MAEZD,cAAiB,KACjBC,SAAY,QAGb3B,mBAAsB,EACtBuB,WAAc,OACdC,gBAAmB,QACnBC,aAAgB,EAChB1B,UACC2B,cAAiB,MACjBC,SAAY,MAEZD,cAAiB,MACjBC,SAAY,QAGb3B,mBAAsB,EACtBuB,WAAc,OACdC,gBAAmB,QACnBC,aAAgB,EAChB1B,UACC2B,cAAiB,KACjBC,SAAY,MAEZD,cAAiB,KACjBC,SAAY,QAIdb,EAAOc,UACN5B,mBAAsB,EACtBuB,WAAc,OACdC,gBAAmB,QACnBC,aAAgB,EAChB1B,UACC2B,cAAiB,KACjBC,SAAY,MAEZD,cAAiB,KACjBC,SAAY,QAGb3B,mBAAsB,EACtBuB,WAAc,OACdC,gBAAmB,QACnBC,aAAgB,EAChB1B,UACC2B,cAAiB,MACjBC,SAAY,MAEZD,cAAiB,MACjBC,SAAY,QAGb3B,mBAAsB,EACtBuB,WAAc,OACdC,gBAAmB,QACnBC,aAAgB,EAChB1B,UACC2B,cAAiB,KACjBC,SAAY,MAEZD,cAAiB,KACjBC,SAAY,QAKdX,EAAMa,KAAKzD,WAAWQ,WACpBN,QAAWF,WAAWE,QACtBwD,YAAe,MAEfC,QAAQ,SAAUC,GAClB3E,QAAQC,IAAI0E,GACI,WAAZA,EAAKC,MACRnB,EAAOoB,OAASvC,UAAUwC,EAAEC,QAAQJ,EAAKK,KAAKC,YAE9CxB,EAAOM,aAAaN,EAAOoB,aAO/BzE,IAAIU,WAAW,qBAAsB,SAAU2C,EAAQC,EAAYC,EAAOuB,EAAUC,EAAcC,EAAQC,GAMzGrF,QAAQC,IAAI,0BACZsD,EAAE,+BAA+BK,SAAS,UAC1CL,EAAE,iBAAiBM,OAAON,EAAEO,QAAQD,SAAW,IAG/CJ,EAAO6B,WAAa,WACnBC,MACCC,MAAO,KAEPC,mBAAmB,EACnBC,iBAAiB,EACjBC,WAAW,EACXC,MAAO,WACPC,iBAAkB,YAClBC,KAAM,wQAGNC,eAAgB,SAAUC,GACzB,MAAO,IAAIC,SAAQ,SAAUC,EAASC,GAErCC,SAAW7C,EAAE,YAAY8C,MACpB,sBAAsBC,KAAKF,WAAeJ,EAAMpD,QAAU,GAAKoD,EAAMpD,QAAU,GACnFsD,IAIAC,EAHY,sBAAsBG,KAAKF,UAGhC,WAFA,gBAMVG,kBAAkB,EAClBC,kBAAmB,KACnBC,iBAAkB,QAChBC,KAAK,SAAUC,GACjB5F,WAAWE,QAAUsC,EAAE,YAAY8C,MACnCtF,WAAWG,SAAWyF,EACtB5F,WAAWI,WAAakE,EAAIuB,WAAWD,GAEvChD,EAAMa,KAAKzD,WAAWO,WACpBL,QAAWF,WAAWE,QACtBC,SAAYH,WAAWI,WACvB0F,SAAY,UACZnF,WAAcX,WAAWW,aAEzBgD,QAAQ,SAAUC,GACdA,EAAKC,KAER7D,WAAWU,SAAU,EACrBV,WAAWC,OAAS2D,EAAK3D,OACzByC,EAAOqD,UACPvB,KAAKwB,gBACLxB,MACCC,MAAO,OACPwB,KAAM,UACNT,kBAAkB,EAClBU,mBAAmB,EACnBpF,KAAM,gBACNqF,MAAO,MACLR,KACF,aAEA,SAAUS,GACO,UAAZA,GACHnH,QAAQC,IAAI,+BAMXc,WAAWW,YACdyD,EAAaiC,IAAI,QAChBpG,OAAQD,WAAWC,OACnBG,WAAYJ,WAAWI,aAEvBkG,QAAS,GAAIC,OAAK,GAAIA,OAAOC,UAAY,WAe3ChC,KAAK,KAAMZ,EAAK6C,UAAW,SAASd,KAAK,WACxCjD,EAAO6B,kBAKT,SAAU6B,GACI,WAAZA,GACH1D,EAAOgE,kBA3FTlC,SA6FSA,KAAKmC,OAIfjE,EAAOgE,cAAgB,WACtBlC,KAAKoC,aACJ/B,MAAO,OACPY,kBAAmB,YACnBf,mBAAmB,EACnBC,iBAAiB,EACjBa,kBAAkB,EAClBZ,WAAW,EACXc,iBAAkB,MAClBmB,eAAgB,IAAK,IAAK,IAAK,MAGhC,IAAIC,GAEAC,IACHtC,MAAO,OACPI,MAAO,OACPC,iBAAkB,cAClBW,kBAAmB,QACnBT,eAAgB,SAAUC,GACzB,MAAO,IAAIC,SAAQ,SAAUC,EAASC,GAChC,sBAAsBG,KAAKN,IAC/BjF,WAAWE,QAAU+E,EAarBE,KAEAC,EAAO,kBAKVX,MAAO,MACPI,MAAO,OACPC,iBAAkB,gBAElBL,MAAO,KACPI,MAAO,WACPC,iBAAkB,YAClBE,eAAgB,SAAUC,GACzB,MAAO,IAAIC,SAAQ,SAAUC,EAASC,GACjCH,EAAMpD,QAAU,GAAKoD,EAAMpD,QAAU,IACxCiF,EAAe7B,EACfE,KAEAC,EAAO,mBAKVX,MAAO,SACPI,MAAO,WACPY,kBAAmB,KACnBX,iBAAkB,gBAClBE,eAAgB,SAAUC,GACzB,MAAO,IAAIC,SAAQ,SAAUC,EAASC,GACjCH,EAAMpD,QAAU,GAAKoD,EAAMpD,QAAU,IAAMoD,GAAS6B,GACvD9G,WAAWG,SAAW2G,EACtB9G,WAAWI,WAAakE,EAAIuB,WAAWiB,GAEvClE,EAAMa,KAAKzD,WAAWM,cACpBJ,QAAWF,WAAWE,QACtBC,SAAYH,WAAWI,WACvB0F,SAAY,YAEZnC,QAAQ,SAAUC,GACdA,EAAKC,KAER7D,WAAWC,OAAS2D,EAAK3D,OACzBkF,IACAnF,WAAWU,SAAU,EACrBgC,EAAOqD,YAEPvB,KAAKwB,gBACLxB,KAAK,KAAMZ,EAAK6C,UAAW,SAASd,KAAK,WACxCjD,EAAOgE,sBAMXtB,EADUH,GAAS6B,EACZ,SAEA,kBAMXtC,MAAKwC,MAAMD,GAAOpB,KAAK,SAAUC,GAChCpB,KAAKwB,gBACLxB,MACCC,MAAO,OACPwB,KAAM,UACNT,kBAAkB,EAClBU,mBAAmB,EACnBpF,KAAM,gBACNqF,MAAO,MACLR,KACF,aAEA,SAAUS,GACO,UAAZA,GACHnH,QAAQC,IAAI,gCAIb,SAAUkH,GACI,WAAZA,IACH5B,KAAKwB,gBACLtD,EAAO6B,gBAOV,IAAI0C,GAAa,CAGjBvE,GAAOwE,cAGPxE,EAAOyE,UAAY,SAAUC,EAAMnC,GAClC,GAAIoC,IACHC,KAAQF,EACRG,UAAatC,GAId,IAAgC,GAA5BvC,EAAOwE,WAAWrF,OAAa,CAClC,GAAI2F,IAAoB,CACxBzD,GAAE0D,KAAK/E,EAAOwE,WAAY,SAAUQ,GAC/BA,EAAEJ,MAAQF,IACbM,EAAEH,UAAYtC,GACduC,GAAoB,KAGjBA,GACJ9E,EAAOwE,WAAWS,KAAKN,OAGxB3E,GAAOwE,WAAWS,KAAKN,EAExBpI,SAAQC,IAAIwD,EAAOwE,aAIpBxE,EAAOkF,UAAY,SAAUR,EAAMS,GAClC,GAAIR,IACHC,KAAQF,EACRG,UAAaM,GAId,IAAgC,GAA5BnF,EAAOwE,WAAWrF,OAAa,CAClC,GAAI2F,IAAoB,CACxBzD,GAAE0D,KAAK/E,EAAOwE,WAAY,SAAUQ,GAC/BA,EAAEJ,MAAQF,IACbM,EAAEH,UAAYM,GACdL,GAAoB,KAGjBA,GACJ9E,EAAOwE,WAAWS,KAAKN,OAGxB3E,GAAOwE,WAAWS,KAAKN,EAExBpI,SAAQC,IAAIwD,EAAOwE,aAIpBxE,EAAOoF,UAAY,SAAUV,EAAMS,GAClC,GAAIR,IACHC,KAAQF,EACRG,UAAaM,GAId,IAAgC,GAA5BnF,EAAOwE,WAAWrF,OAAa,CAClC,GAAI2F,IAAoB,CACxBzD,GAAE0D,KAAK/E,EAAOwE,WAAY,SAAUQ,GACnC,GAAIA,EAAEJ,MAAQF,EAAM,CACnB,GAAIW,IAAc,CAClBhE,GAAE0D,KAAKC,EAAEH,SAAU,SAAUS,EAAKC,GAC7BD,GAAOH,IACVH,EAAEH,SAASW,OAAOD,EAAG,GAErBF,GAAc,KAGXA,GACJL,EAAEH,SAASI,KAAKE,GAEjBL,GAAoB,KAGjBA,GACJ9E,EAAOwE,WAAWS,KAAKN,OAGxB3E,GAAOwE,WAAWS,KAAKN,EAExBpI,SAAQC,IAAIwD,EAAOwE,aAIpBxE,EAAOyF,aAAe,SAAU3G,GAC/BvC,QAAQC,IAAIsC,GACZkB,EAAO0F,UAAY5G,GAIpBkB,EAAOqD,QAAU,WAChBnD,EAAMa,KAAKzD,WAAWQ,WACpBN,QAAWF,WAAWE,QACtBwD,YAAeuD,IAEftD,QAAQ,SAAUC,GAClB3E,QAAQC,IAAI0E,GACRA,EAAKC,KACRnB,EAAO2F,OAAS9G,UAAUwC,EAAEC,QAAQJ,EAAKK,KAAKC,YAE9CxB,EAAOyF,aAAazF,EAAO2F,UAE3B7D,KAAK,WAAYZ,EAAK6C,UAAW,SACjC/D,EAAO6B,gBAGR+D,MAAM,SAAUC,EAAMC,EAAQhJ,EAAQiJ,GACtCjE,KAAM,OAAQ,QAAUgE,EAAS,YAKpCrJ,WAAa,WACZyD,EAAMa,KAAKzD,WAAWS,kBACpBR,OAAUD,WAAWC,OACrByD,YAAeuD,EACfyB,OAAUhG,EAAOwE,aAEjBvD,QAAQ,SAAUC,GACdA,EAAKC,IACR5E,QAAQC,IAAI0E,EAAKK,MAEjBO,KAAK,WAAYZ,EAAK6C,UAAW,WAGlC6B,MAAM,SAAUC,EAAMC,EAAQhJ,EAAQiJ,GACtCjE,KAAM,OAAQ,QAAUgE,EAAS,YAOhCxI,WAAWU,QACdgC,EAAOqD,UAIPrD,EAAO6B,aAIR7B,EAAOiG,SAAWvE,EAAawE,IAAI,QACnC3J,QAAQC,IAAIwD,EAAOiG,YAcpBtJ,IAAIU,WAAW,qBAAsB,SAAU2C,EAAQC,EAAYC,GAClE3D,QAAQC,IAAI,0BACZsD,EAAE,gBAAgBK,SAAS,UAC3BF,EAAW5D,OAASV,aACpBmE,EAAE,iBAAiBM,OAAON,EAAEO,QAAQD,SAAW,MAIhDzD,IAAIU,WAAW,oBAAqB,SAAU2C,EAAQC,EAAYC,GACjE3D,QAAQC,IAAI,yBACZsD,EAAE,kBAAkBK,SAAS,UAC7BF,EAAW5D,OAASV,aACpBmE,EAAE,iBAAiBM,OAAON,EAAEO,QAAQD,SAAW,MAIhDzD,IAAIU,WAAW,iBAAkB,SAAU2C,EAAQC,EAAYC,GAC9D3D,QAAQC,IAAI,sBACZsD,EAAE,aAAaK,SAAS,UACxBF,EAAW5D,OAASV,aACpBmE,EAAE,iBAAiBM,OAAON,EAAEO,QAAQD,SAAW,MAIhDzD,IAAIU,WAAW,aAAc,SAAU2C,EAAQC,EAAYC,GAC1D3D,QAAQC,IAAI,kBACZsD,EAAE,yBAAyBK,SAAS,UACpCF,EAAW5D,OAASV,aACpBmE,EAAE,iBAAiBM,OAAON,EAAEO,QAAQD,SAAW,MAGhDzD,IAAIU,WAAW,YAAa,SAAU2C,EAAQC,EAAYC,GACzD3D,QAAQC,IAAI,SAIbG,IAAI2B,UAAU,aAAc,WAC3B,OACC6H,SAAU,KACVC,SAAS,EACTC,SAAU,qMACVhJ,WAAY,SAAU2C,EAAQC,GAC7BD,EAAOsG,KAAO,WACbrG,EAAW5D,OAAOkK,aAEnBvG,EAAOwG,KAAO,WACbvG,EAAW5D,OAAOoK,iBAOtB9J,IAAI2B,UAAU,WAAY,SAAUqD,GACnC,OACCwE,SAAU,KACVC,SAAS,EACT5H,OACCkI,QAAS,aAEVL,SAAU,qMACVhJ,WAAY,SAAU2C,EAAQC,EAAY0B,GACzC3B,EAAOsG,KAAO,WACb3E,EAAOgF,GAAG3G,EAAO0G,aAElB1G,EAAOwG,KAAO,WACbvG,EAAW5D,OAAOoK,iBAOtB9J,IAAI2B,UAAU,WAAY,SAAUqD,GACnC,OACCwE,SAAU,KACVC,SAAS,EACT5H,OACCkI,QAAS,aAEVL,SAAU,qMACVhJ,WAAY,SAAU2C,EAAQC,EAAY0B,GACzC3B,EAAOsG,KAAO,WACbrG,EAAW5D,OAAOkK,aAEnBvG,EAAOwG,KAAO,WACb7E,EAAOgF,GAAG3G,EAAO0G","file":"app.js","sourcesContent":["//启动入口\nvar app = angular.module('myApp', [\"ngRoute\", \"ui.router\", \"angular-md5\", \"ngSanitize\", \"ngCookies\"])\n\napp.config(function ($stateProvider, $urlRouterProvider) {\n\t$urlRouterProvider.when(\"\", \"/basicSituation\"); // TODO: change to personal\n\t$stateProvider\n\t\t.state('personal', {\n\t\t\turl: \"/personal\",\n\t\t\ttemplateUrl: \"./html/personal.html\",\n\t\t\tcontroller: \"personalCtrl\"\n\t\t})\n\t\t.state('basicSituation', {\n\t\t\turl: \"/basicSituation\",\n\t\t\ttemplateUrl: \"./html/basicSituation.html\",\n\t\t\tcontroller: \"basicSituationCtrl\"\n\t\t})\n\t\t.state('medicalHistory', {\n\t\t\turl: \"/medicalHistory\",\n\t\t\ttemplateUrl: \"./html/medicalHistory.html\",\n\t\t\tcontroller: \"medicalHistoryCtrl\"\n\t\t})\n\t\t.state('habitsCustoms', {\n\t\t\turl: \"/habitsCustoms\",\n\t\t\ttemplateUrl: \"./html/habitsCustoms.html\",\n\t\t\tcontroller: \"habitsCustomsCtrl\"\n\t\t})\n\t\t.state('medication', {\n\t\t\turl: \"/medication\",\n\t\t\ttemplateUrl: \"./html/medication.html\",\n\t\t\tcontroller: \"medicationCtrl\"\n\t\t})\n\t\t.state('breast', {\n\t\t\turl: \"/breast\",\n\t\t\ttemplateUrl: \"./html/breast.html\",\n\t\t\tcontroller: \"breastCtrl\"\n\t\t})\n\t\t.state('login', {\n\t\t\turl: \"/login\",\n\t\t\ttemplateUrl: \"./html/login.html\",\n\t\t\tcontroller: \"loginCtrl\"\n\t\t})\n});\n\nvar allFactory = {\n\t\"userId\": \"\",\n\t\"teleNum\": \"\",\n\t\"password\": \"\",\n\t\"HASHPASSWD\": \"\",\n\t\"tagIP\": \"http://10.24.14.92\", //测试用 ip\n\t// \"tagIP\": \"http://120.27.49.154:8080\",\t//生产用 ip\n\t\"postRegister\": \"http://120.27.49.154:8080/BreastCancer/register\", //测试用注册\n\t\"postLogin\": \"http://120.27.49.154:8080/BreastCancer/login\", //测试用登录\n\t\"ipAddress\": \"http://120.27.49.154:8080/BreastCancer/getQuestion\", //测试用请求题目\n\t\"setAnwserAddress\": \"http://120.27.49.154:8080/BreastCancer/getInsertInfo\", //测试用提交答案\n\t\"isLogin\": false,\n\t\"isRemember\": false\n}\n\n// 用于全局答题函数\nvar httpAnswer;\n\n//挂载到任意一个angular.module下，用于 ng-bind-html\napp.filter('to_trusted', ['$sce', function ($sce) {\n\treturn function (text) {\n\t\treturn $sce.trustAsHtml(text);\n\t};\n}]);\n\n// 监听 ng-reapeat 完成\napp.directive('repeatFinish', function () {\n\treturn {\n\t\tlink: function (scope, element, attr) {\n\t\t\tif (scope.$last == true) {\n\t\t\t\tscope.rootSwiper = makeSwiper()\n\t\t\t\tconsole.log('ng-repeat render finish')\n\t\t\t}\n\t\t}\n\t}\n})\n\n// 初始化 swiper\nfunction makeSwiper() {\n\tvar swiperObj = {\n\t\tdirection: 'horizontal',\n\t\ttouchMoveStopPropagation: true, //阻止冒泡\n\t\tpaginationClickable: true,\n\t\tpagination: '.swiper-pagination',\n\t\tiOSEdgeSwipeDetection: true,\n\t\tflip: {\n\t\t\tslideShadows: false\n\t\t},\n\t\tonTransitionEnd: function (swiper, event) {\n\t\t\tconsole.log(\"slide\")\n\t\t\thttpAnswer(); //TODO:后期可以做一些模块化处理\n\t\t}\n\t};\n\treturn new Swiper('.swiper-container', swiperObj);\n}\n\n// 计算权重的函数\nvar sumWeight = function (tagArr) {\n\tvar tagArrResult = [];\n\tfor (var secQue in tagArr) {\n\t\tif (tagArr[secQue].options && (tagArr[secQue].questionAnswerType == '0' || tagArr[secQue].questionAnswerType == '1' || tagArr[secQue].questionAnswerType == '2' || tagArr[secQue].questionAnswerType == '4' || tagArr[secQue].questionAnswerType == '5' || tagArr[secQue].questionAnswerType == '7')) {\n\t\t\ttagArrResult[secQue] = tagArr[secQue].options.length + 1;\n\t\t} else if (tagArr[secQue].questionAnswerType == '3' || tagArr[secQue].questionAnswerType == '6') {\n\t\t\ttagArrResult[secQue] = 2;\n\t\t} else {\n\t\t\ttagArrResult[secQue] = 2;\n\t\t}\n\t}\n\tconsole.log(tagArrResult)\n\treturn splitWeight(tagArrResult, tagArr);\n}\n\n// 计算切割位置并切割\nvar splitWeight = function (tagArr, origionArr) {\n\tvar i = 0,\n\t\tsum = 0,\n\t\ttagArrResult = [];\n\tfor (var item in tagArr) {\n\t\tif (tagArr[item] + sum <= 13) {\n\t\t\tsum += tagArr[item];\n\t\t} else {\n\t\t\tsum = 0;\n\t\t\ttagArrResult[i] = item;\n\t\t\ti += 1;\n\t\t}\n\t}\n\tconsole.log(tagArrResult)\n\n\tvar finalSplitedArr = [];\n\tfor (var itemTwo in tagArrResult) {\n\t\tif (itemTwo == 0) {\n\t\t\tfinalSplitedArr[itemTwo] = origionArr.slice(0, tagArrResult[itemTwo]);\n\t\t} else {\n\t\t\tfinalSplitedArr[itemTwo] = origionArr.slice(tagArrResult[itemTwo - 1], tagArrResult[itemTwo]);\n\t\t}\n\t\tfinalSplitedArr[tagArrResult.length] = origionArr.slice(tagArrResult[tagArrResult.length - 1], tagArrResult[tagArrResult.length]);\n\t}\n\treturn finalSplitedArr\n}\n\n// 计算页数并显示TODO\nvar takePagesNum = function (tagArr) {\n\tvar $pagin = $(\".swiper-pagination\")\n\tfor (var i in tagArr) {\n\t\t$pagin.append('<span class=\"swiper-pagination-bullet\"></span>')\n\t}\n}\n\n// 1个人信息\napp.controller('personalCtrl', function ($scope, $rootScope, $http) {\n\n\t// 进入页面一些初始化配置\n\tconsole.log(\"personalCtrl  p1\");\n\t$(\".icon-gerenxinxi\").addClass(\"active\")\n\t$rootScope.swiper = makeSwiper()\n\t$(\".swiper-slide\").height($(window).height() - 50);\n\n\t$scope.setModOneQue = function (tagArr) {\n\t\tconsole.log(tagArr);\n\t\t// takePagesNum(tagArr)\n\t}\n\n\n\n\t$scope.aa = '足月妊娠次数<input class=\"insertPut shortInput\" type=\"text\" placeholder=\"请输入\">次'\n\t\t// $scope.aa = '您在奥斯卡级等哈看书的啊啊？<input class=\"insertPut longInput\" type=\"text\" placeholder=\"请输入\">'\n\t$scope.testDou = [{\n\t\t\"questionAnswerType\": 1,\n\t\t\"questionId\": \"0.10\",\n\t\t\"questionContent\": \"居住地区：\",\n\t\t\"questionType\": 1,\n\t\t\"options\": [{\n\t\t\t\"anwserContent\": \"城市\",\n\t\t\t\"anwserId\": \"1\"\n\t\t}, {\n\t\t\t\"anwserContent\": \"农村\",\n\t\t\t\"anwserId\": \"2\"\n\t\t}]\n\t}, {\n\t\t\"questionAnswerType\": 1,\n\t\t\"questionId\": \"0.15\",\n\t\t\"questionContent\": \"用户类别：\",\n\t\t\"questionType\": 1,\n\t\t\"options\": [{\n\t\t\t\"anwserContent\": \"病例组\",\n\t\t\t\"anwserId\": \"1\"\n\t\t}, {\n\t\t\t\"anwserContent\": \"对照组\",\n\t\t\t\"anwserId\": \"2\"\n\t\t}]\n\t}, {\n\t\t\"questionAnswerType\": 1,\n\t\t\"questionId\": \"0.16\",\n\t\t\"questionContent\": \"填写方式：\",\n\t\t\"questionType\": 1,\n\t\t\"options\": [{\n\t\t\t\"anwserContent\": \"线上\",\n\t\t\t\"anwserId\": \"1\"\n\t\t}, {\n\t\t\t\"anwserContent\": \"线下\",\n\t\t\t\"anwserId\": \"2\"\n\t\t}]\n\t}]\n\n\t$scope.testSin = [{\n\t\t\"questionAnswerType\": 1,\n\t\t\"questionId\": \"0.10\",\n\t\t\"questionContent\": \"居住地区：\",\n\t\t\"questionType\": 1,\n\t\t\"options\": [{\n\t\t\t\"anwserContent\": \"城市\",\n\t\t\t\"anwserId\": \"1\"\n\t\t}, {\n\t\t\t\"anwserContent\": \"农村\",\n\t\t\t\"anwserId\": \"2\"\n\t\t}]\n\t}, {\n\t\t\"questionAnswerType\": 1,\n\t\t\"questionId\": \"0.15\",\n\t\t\"questionContent\": \"用户类别：\",\n\t\t\"questionType\": 1,\n\t\t\"options\": [{\n\t\t\t\"anwserContent\": \"病例组\",\n\t\t\t\"anwserId\": \"1\"\n\t\t}, {\n\t\t\t\"anwserContent\": \"对照组\",\n\t\t\t\"anwserId\": \"2\"\n\t\t}]\n\t}, {\n\t\t\"questionAnswerType\": 1,\n\t\t\"questionId\": \"0.16\",\n\t\t\"questionContent\": \"填写方式：\",\n\t\t\"questionType\": 1,\n\t\t\"options\": [{\n\t\t\t\"anwserContent\": \"线上\",\n\t\t\t\"anwserId\": \"1\"\n\t\t}, {\n\t\t\t\"anwserContent\": \"线下\",\n\t\t\t\"anwserId\": \"2\"\n\t\t}]\n\t}]\n\n\n\t$http.post(allFactory.ipAddress, {\n\t\t\t'teleNum': allFactory.teleNum,\n\t\t\t'paperModule': '1'\n\t\t})\n\t\t.success(function (resp) {\n\t\t\tconsole.log(resp)\n\t\t\tif (resp.msg == 'success') {\n\t\t\t\t$scope.modOne = sumWeight(_.flatten(resp.body.questions));\n\t\t\t\t// console.log(sumWeight($scope.modOne))\n\t\t\t\t$scope.setModOneQue($scope.modOne);\n\t\t\t}\n\t\t})\n\n});\n\n// 2基本情况\napp.controller('basicSituationCtrl', function ($scope, $rootScope, $http, $cookies, $cookieStore, $state, md5) {\n\t// if(!allFactory.isLogin) $state.go('personal',{})\n\n\t// 这里是一个 md5加密的例子\n\t// console.log(md5.createHash('444444').length)\n\n\tconsole.log(\"basicSituationCtrl  p2\");\n\t$(\".icon-xinyongqingkuang-copy\").addClass(\"active\")\n\t$(\".swiper-slide\").height($(window).height() - 50);\n\n\t// 登录弹窗\n\t$scope.alertLogin = function () {\n\t\tswal({\n\t\t\ttitle: '登录',\n\t\t\t// type: 'warning',\n\t\t\tallowOutsideClick: false,\n\t\t\tshowCloseButton: false,\n\t\t\tanimation: false,\n\t\t\tinput: 'password',\n\t\t\tinputPlaceholder: '密码(6-10位)',\n\t\t\thtml: '<input class=\"swal2-input\" id=\"teleNum\" placeholder=\"手机号/用户名\" type=\"text\" style=\"display: block;\" autofocus>' +\n\t\t\t\t'<div class=\"weui-cell__hd\"><input type=\"checkbox\" class=\"loginCheckbox\" name=\"checkbox1\" id=\"loginCheckbox\" checked=\"checked\"><span>记住密码自动登录</span></div>',\n\n\t\t\tinputValidator: function (value) {\n\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\t// console.log(value)\n\t\t\t\t\t$teleNum = $('#teleNum').val();\n\t\t\t\t\tif ((/^1(3|4|5|7|8)\\d{9}$/.test($teleNum)) && (value.length >= 6 && value.length <= 10)) {\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t} else if (!(/^1(3|4|5|7|8)\\d{9}$/.test($teleNum))) {\n\t\t\t\t\t\treject('请正确填写手机号!')\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject('请正确填写密码!')\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tshowCancelButton: true,\n\t\t\tconfirmButtonText: '登录',\n\t\t\tcancelButtonText: '去注册'\n\t\t}).then(function (result) {\n\t\t\tallFactory.teleNum = $('#teleNum').val();\n\t\t\tallFactory.password = result;\n\t\t\tallFactory.HASHPASSWD = md5.createHash(result);\n\n\t\t\t$http.post(allFactory.postLogin, {\n\t\t\t\t\t\"teleNum\": allFactory.teleNum,\n\t\t\t\t\t\"password\": allFactory.HASHPASSWD,\n\t\t\t\t\t\"roleName\": \"patient\",\n\t\t\t\t\t\"isRemember\": allFactory.isRemember\n\t\t\t\t})\n\t\t\t\t.success(function (resp) {\n\t\t\t\t\tif (resp.msg) {\n\t\t\t\t\t\t// console.log(resp.body)\n\t\t\t\t\t\tallFactory.isLogin = true;\n\t\t\t\t\t\tallFactory.userId = resp.userId;\n\t\t\t\t\t\t$scope.getPage();\n\t\t\t\t\t\tswal.resetDefaults()\n\t\t\t\t\t\tswal({\n\t\t\t\t\t\t\ttitle: '登录成功',\n\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\tshowCancelButton: false,\n\t\t\t\t\t\t\tshowConfirmButton: false,\n\t\t\t\t\t\t\ttext: '请开始填写问卷，2秒后关闭',\n\t\t\t\t\t\t\ttimer: 2000\n\t\t\t\t\t\t}).then(\n\t\t\t\t\t\t\tfunction () {},\n\t\t\t\t\t\t\t// handling the promise rejection\n\t\t\t\t\t\t\tfunction (dismiss) {\n\t\t\t\t\t\t\t\tif (dismiss === 'timer') {\n\t\t\t\t\t\t\t\t\tconsole.log('I was closed by the timer')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\t// putcookiecookie，自动登录\n\t\t\t\t\t\tif (allFactory.isRemember) {\n\t\t\t\t\t\t\t$cookieStore.put(\"user\", {\n\t\t\t\t\t\t\t\tuserId: allFactory.userId,\n\t\t\t\t\t\t\t\tHASHPASSWD: allFactory.HASHPASSWD\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\texpires: new Date(new Date().getTime() + (7 * 24 * 60 * 60))\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t// $cookies.put(\"userId\", allFactory.userId, {\n\t\t\t\t\t\t\t// \texpires: new Date(new Date().getTime() + (7 * 24 * 60 * 60))\n\t\t\t\t\t\t\t// });\n\t\t\t\t\t\t\t// $cookies.put(\"HASHPASSWD\", allFactory.HASHPASSWD, {\n\t\t\t\t\t\t\t// \texpires: new Date(new Date().getTime() + (7 * 24 * 60 * 60))\n\t\t\t\t\t\t\t// });\n\t\t\t\t\t\t\t// $cookieStore.put(\"userId\", allFactory.userId);\n\t\t\t\t\t\t\t// $cookieStore.put(\"HASHPASSWD\", allFactory.HASHPASSWD);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// else {\n\t\t\t\t\t\t// \t$scope.cookUser = {};\n\t\t\t\t\t\t// }\n\t\t\t\t\t} else {\n\t\t\t\t\t\tswal('错误', resp.errorText, 'error').then(function () {\n\t\t\t\t\t\t\t$scope.alertLogin()\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t}, function (dismiss) {\n\t\t\tif (dismiss === 'cancel') {\n\t\t\t\t$scope.alertRegister()\n\t\t\t}\n\t\t}).catch(swal.noop)\n\t}\n\n\t// 注册弹窗\n\t$scope.alertRegister = function () {\n\t\tswal.setDefaults({\n\t\t\tinput: 'text',\n\t\t\tconfirmButtonText: '下一步&rarr;',\n\t\t\tallowOutsideClick: false,\n\t\t\tshowCloseButton: false,\n\t\t\tshowCancelButton: true,\n\t\t\tanimation: false,\n\t\t\tcancelButtonText: '去登录',\n\t\t\tprogressSteps: ['1', '2', '3', '4']\n\t\t})\n\n\t\tvar yourPassWord;\n\n\t\tvar steps = [{\n\t\t\ttitle: '手机号码',\n\t\t\tinput: 'text',\n\t\t\tinputPlaceholder: '请输入您的真实手机号码',\n\t\t\tconfirmButtonText: '发送验证码',\n\t\t\tinputValidator: function (value) {\n\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\tif ((/^1(3|4|5|7|8)\\d{9}$/.test(value))) { // TODO：验证手机号\n\t\t\t\t\t\tallFactory.teleNum = value\n\t\t\t\t\t\t\t// $http.post(allFactory.postRegister, {\n\t\t\t\t\t\t\t// \t\t\"teleNum\": \"13220101996\",//allFactory.teleNum,\n\t\t\t\t\t\t\t// \t\t\"password\": thisModule,\n\t\t\t\t\t\t\t// \t\t\"answer\": $scope.userAnswer\n\t\t\t\t\t\t\t// \t})\n\t\t\t\t\t\t\t// \t.success(function (resp) {\n\t\t\t\t\t\t\t// \t\tif (resp.msg) {\n\t\t\t\t\t\t\t// \t\t\tconsole.log(resp.body)\n\t\t\t\t\t\t\t// \t\t} else {\n\t\t\t\t\t\t\t// \t\t\tswal('网络错误，请重试', '', 'error')\n\t\t\t\t\t\t\t// \t\t}\n\t\t\t\t\t\t\t// \t});\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject('请输入正确的手机号')\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}, {\n\t\t\ttitle: '验证码',\n\t\t\tinput: 'text',\n\t\t\tinputPlaceholder: '请填入刚刚收到的验证码'\n\t\t}, {\n\t\t\ttitle: '密码',\n\t\t\tinput: 'password',\n\t\t\tinputPlaceholder: '密码(6-10位)',\n\t\t\tinputValidator: function (value) {\n\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\tif (value.length >= 6 && value.length <= 10) {\n\t\t\t\t\t\tyourPassWord = value;\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject('请按格式正确输入密码')\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}, {\n\t\t\ttitle: '重复输入密码',\n\t\t\tinput: 'password',\n\t\t\tconfirmButtonText: '注册',\n\t\t\tinputPlaceholder: '重复输入密码(6-10位)',\n\t\t\tinputValidator: function (value) {\n\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\tif (value.length >= 6 && value.length <= 10 && value == yourPassWord) {\n\t\t\t\t\t\tallFactory.password = yourPassWord;\n\t\t\t\t\t\tallFactory.HASHPASSWD = md5.createHash(yourPassWord);\n\n\t\t\t\t\t\t$http.post(allFactory.postRegister, {\n\t\t\t\t\t\t\t\t\"teleNum\": allFactory.teleNum,\n\t\t\t\t\t\t\t\t\"password\": allFactory.HASHPASSWD,\n\t\t\t\t\t\t\t\t\"roleName\": \"patient\"\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.success(function (resp) {\n\t\t\t\t\t\t\t\tif (resp.msg) {\n\t\t\t\t\t\t\t\t\t// console.log(resp.body)\n\t\t\t\t\t\t\t\t\tallFactory.userId = resp.userId;\n\t\t\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t\t\t\tallFactory.isLogin = true;\n\t\t\t\t\t\t\t\t\t$scope.getPage()\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tswal.resetDefaults()\n\t\t\t\t\t\t\t\t\tswal('错误', resp.errorText, 'error').then(function () {\n\t\t\t\t\t\t\t\t\t\t$scope.alertRegister()\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t} else if (value != yourPassWord) {\n\t\t\t\t\t\treject('密码输入不符')\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject('请按格式正确输入密码')\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}]\n\n\t\tswal.queue(steps).then(function (result) {\n\t\t\tswal.resetDefaults()\n\t\t\tswal({\n\t\t\t\ttitle: '注册成功',\n\t\t\t\ttype: 'success',\n\t\t\t\tshowCancelButton: false,\n\t\t\t\tshowConfirmButton: false,\n\t\t\t\ttext: '请开始填写问卷，2秒后关闭',\n\t\t\t\ttimer: 2000\n\t\t\t}).then(\n\t\t\t\tfunction () {},\n\t\t\t\t// handling the promise rejection\n\t\t\t\tfunction (dismiss) {\n\t\t\t\t\tif (dismiss === 'timer') {\n\t\t\t\t\t\tconsole.log('I was closed by the timer')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t}, function (dismiss) {\n\t\t\tif (dismiss === 'cancel') {\n\t\t\t\tswal.resetDefaults()\n\t\t\t\t$scope.alertLogin()\n\t\t\t}\n\t\t})\n\t}\n\n\n\t// 当前模块号\n\tvar thisModule = 2;\n\n\t// 答案数组\n\t$scope.userAnswer = []\n\n\t// 填空答题\n\t$scope.fillBlank = function (uuid, value) {\n\t\tvar thisQues = {\n\t\t\t\"UUID\": uuid,\n\t\t\t\"answerId\": [value]\n\t\t}\n\n\t\t// 若答过就不添加只修改\n\t\tif ($scope.userAnswer.length != 0) {\n\t\t\tvar judgeHaveAnswered = false;\n\t\t\t_.each($scope.userAnswer, function (b) {\n\t\t\t\tif (b.UUID == uuid) {\n\t\t\t\t\tb.answerId = [value];\n\t\t\t\t\tjudgeHaveAnswered = true;\n\t\t\t\t}\n\t\t\t})\n\t\t\tif (!judgeHaveAnswered) {\n\t\t\t\t$scope.userAnswer.push(thisQues)\n\t\t\t}\n\t\t} else {\n\t\t\t$scope.userAnswer.push(thisQues)\n\t\t}\n\t\tconsole.log($scope.userAnswer)\n\t}\n\n\t// 单选题选择事件\n\t$scope.chooseSin = function (uuid, option) {\n\t\tvar thisQues = {\n\t\t\t\"UUID\": uuid,\n\t\t\t\"answerId\": [option]\n\t\t}\n\n\t\t// 若答过就不添加只修改\n\t\tif ($scope.userAnswer.length != 0) {\n\t\t\tvar judgeHaveAnswered = false;\n\t\t\t_.each($scope.userAnswer, function (b) {\n\t\t\t\tif (b.UUID == uuid) {\n\t\t\t\t\tb.answerId = [option];\n\t\t\t\t\tjudgeHaveAnswered = true;\n\t\t\t\t}\n\t\t\t})\n\t\t\tif (!judgeHaveAnswered) {\n\t\t\t\t$scope.userAnswer.push(thisQues)\n\t\t\t}\n\t\t} else {\n\t\t\t$scope.userAnswer.push(thisQues)\n\t\t}\n\t\tconsole.log($scope.userAnswer)\n\t}\n\n\t// 多选题答题事件\n\t$scope.chooseDou = function (uuid, option) {\n\t\tvar thisQues = {\n\t\t\t\"UUID\": uuid,\n\t\t\t\"answerId\": [option]\n\t\t}\n\n\t\t// 若答过就不添加只修改\n\t\tif ($scope.userAnswer.length != 0) {\n\t\t\tvar judgeHaveAnswered = false;\n\t\t\t_.each($scope.userAnswer, function (b) {\n\t\t\t\tif (b.UUID == uuid) {\n\t\t\t\t\tvar judgeOption = false;\n\t\t\t\t\t_.each(b.answerId, function (ans, k) {\n\t\t\t\t\t\tif (ans == option) {\n\t\t\t\t\t\t\tb.answerId.splice(k, 1)\n\t\t\t\t\t\t\t\t// 若已选过，则删除这个 option\n\t\t\t\t\t\t\tjudgeOption = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tif (!judgeOption) {\n\t\t\t\t\t\tb.answerId.push(option)\n\t\t\t\t\t}\n\t\t\t\t\tjudgeHaveAnswered = true;\n\t\t\t\t}\n\t\t\t})\n\t\t\tif (!judgeHaveAnswered) {\n\t\t\t\t$scope.userAnswer.push(thisQues)\n\t\t\t}\n\t\t} else {\n\t\t\t$scope.userAnswer.push(thisQues)\n\t\t}\n\t\tconsole.log($scope.userAnswer)\n\t}\n\n\t// 渲染题目\n\t$scope.setModTwoQue = function (tagArr) {\n\t\tconsole.log(tagArr)\n\t\t$scope.setModTwo = tagArr;\n\t}\n\n\t// 请求题目\n\t$scope.getPage = function () {\n\t\t$http.post(allFactory.ipAddress, {\n\t\t\t\t'teleNum': allFactory.teleNum,\n\t\t\t\t'paperModule': thisModule\n\t\t\t})\n\t\t\t.success(function (resp) {\n\t\t\t\tconsole.log(resp)\n\t\t\t\tif (resp.msg) {\n\t\t\t\t\t$scope.modTwo = sumWeight(_.flatten(resp.body.questions));\n\t\t\t\t\t// console.log(sumWeight($scope.modOne))\n\t\t\t\t\t$scope.setModTwoQue($scope.modTwo);\n\t\t\t\t} else {\n\t\t\t\t\tswal('网络错误，请重试', resp.errorText, 'error')\n\t\t\t\t\t$scope.alertLogin()\n\t\t\t\t}\n\t\t\t})\n\t\t\t.error(function (data, header, config, status) {\n\t\t\t\tswal( '网络错误', '错误信息：' + header , 'error')\n\t\t\t});\n\t}\n\n\t// 用户回答\n\thttpAnswer = function () {\n\t\t$http.post(allFactory.setAnwserAddress, {\n\t\t\t\t\"userId\": allFactory.userId,\n\t\t\t\t\"paperModule\": thisModule,\n\t\t\t\t\"answer\": $scope.userAnswer\n\t\t\t})\n\t\t\t.success(function (resp) {\n\t\t\t\tif (resp.msg) {\n\t\t\t\t\tconsole.log(resp.body)\n\t\t\t\t} else {\n\t\t\t\t\tswal('网络错误，请重试', resp.errorText, 'error')\n\t\t\t\t}\n\t\t\t})\n\t\t\t.error(function (data, header, config, status) {\n\t\t\t\tswal( '网络错误', '错误信息：' + header , 'error')\n\t\t\t});\n\t}\n\n\t// 测试代码\n\t// $scope.getPage()\n\t// $scope.alertLogin();\n\tif (allFactory.isLogin) {\n\t\t$scope.getPage()\n\t\t\t// allFactory.userId = $scope.cookUser.userId;\n\t\t\t// allFactory.HASHPASSWD = $scope.cookUser.HASHPASSWD;\n\t} else {\n\t\t$scope.alertLogin();\n\t}\n\n\t// 拿到 cookie\n\t$scope.cookUser = $cookieStore.get(\"user\");\n\tconsole.log($scope.cookUser)\n\t\t// $cookieStore.remove(\"user\");\n\n\t// 下面为生产代码\n\t// if (allFactory.isLogin || $scope.cookUser && ($scope.cookUser.userId && $scope.cookUser.HASHPASSWD)) {\n\t// \t$scope.getPage()\n\t// \tallFactory.userId = $scope.cookUser.userId;\n\t// \tallFactory.HASHPASSWD = $scope.cookUser.HASHPASSWD;\n\t// } else {\n\t// \t$scope.alertLogin();\n\t// }\n});\n\n// 3疾病与家族史\napp.controller('medicalHistoryCtrl', function ($scope, $rootScope, $http) {\n\tconsole.log(\"medicalHistoryCtrl  p3\");\n\t$(\".icon-bingli\").addClass(\"active\")\n\t$rootScope.swiper = makeSwiper()\n\t$(\".swiper-slide\").height($(window).height() - 50);\n});\n\n// 4生活习惯\napp.controller('habitsCustomsCtrl', function ($scope, $rootScope, $http) {\n\tconsole.log(\"habitsCustomsCtrl  p4\");\n\t$(\".icon-shenghuo\").addClass(\"active\")\n\t$rootScope.swiper = makeSwiper()\n\t$(\".swiper-slide\").height($(window).height() - 50);\n});\n\n// 5服药、使用化学药剂史\napp.controller('medicationCtrl', function ($scope, $rootScope, $http) {\n\tconsole.log(\"medicationCtrl  p5\");\n\t$(\".icon-yao\").addClass(\"active\")\n\t$rootScope.swiper = makeSwiper()\n\t$(\".swiper-slide\").height($(window).height() - 50);\n});\n\n// 6乳腺相关知识\napp.controller('breastCtrl', function ($scope, $rootScope, $http) {\n\tconsole.log(\"breastCtrl  p6\");\n\t$(\".icon-zhishichanquan2\").addClass(\"active\")\n\t$rootScope.swiper = makeSwiper()\n\t$(\".swiper-slide\").height($(window).height() - 50);\n});\n\napp.controller('loginCtrl', function ($scope, $rootScope, $http) {\n\tconsole.log(\"222\");\n});\n\n// 上一页下一页\napp.directive('changePage', function () {\n\treturn {\n\t\trestrict: 'EA',\n\t\treplace: true,\n\t\ttemplate: '<div class=\"btn-group btn-group-md\"><button type=\"button\" ng-click=\"prev()\" class=\"btn btn-default\">上一页</button><button type=\"button\" ng-click=\"next()\" class=\"btn btn-default\">下一页</button></div>',\n\t\tcontroller: function ($scope, $rootScope) {\n\t\t\t$scope.prev = function () {\n\t\t\t\t$rootScope.swiper.slidePrev();\n\t\t\t}\n\t\t\t$scope.next = function () {\n\t\t\t\t$rootScope.swiper.slideNext();\n\t\t\t}\n\t\t}\n\t}\n})\n\n// 上一章下一页\napp.directive('prevMode', function ($state) {\n\treturn {\n\t\trestrict: 'EA',\n\t\treplace: true,\n\t\tscope: {\n\t\t\tpageUrl: '&infoMode'\n\t\t},\n\t\ttemplate: '<div class=\"btn-group btn-group-md\"><button type=\"button\" ng-click=\"prev()\" class=\"btn btn-default\">上一章</button><button type=\"button\" ng-click=\"next()\" class=\"btn btn-default\">下一页</button></div>',\n\t\tcontroller: function ($scope, $rootScope, $state) {\n\t\t\t$scope.prev = function () {\n\t\t\t\t$state.go($scope.pageUrl, {})\n\t\t\t}\n\t\t\t$scope.next = function () {\n\t\t\t\t$rootScope.swiper.slideNext();\n\t\t\t}\n\t\t}\n\t}\n})\n\n// 上一页下一章\napp.directive('nextMode', function ($state) {\n\treturn {\n\t\trestrict: 'EA',\n\t\treplace: true,\n\t\tscope: {\n\t\t\tpageUrl: '@infoMode'\n\t\t},\n\t\ttemplate: '<div class=\"btn-group btn-group-md\"><button type=\"button\" ng-click=\"prev()\" class=\"btn btn-default\">上一页</button><button type=\"button\" ng-click=\"next()\" class=\"btn btn-default\">下一章</button></div>',\n\t\tcontroller: function ($scope, $rootScope, $state) {\n\t\t\t$scope.prev = function () {\n\t\t\t\t$rootScope.swiper.slidePrev();\n\t\t\t}\n\t\t\t$scope.next = function () {\n\t\t\t\t$state.go($scope.pageUrl, {})\n\t\t\t}\n\t\t}\n\t}\n})"]}